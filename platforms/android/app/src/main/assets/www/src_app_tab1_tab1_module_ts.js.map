{"version":3,"sources":["./src/app/calendar-api.service.ts","./src/app/tab1/tab1-routing.module.ts","./src/app/tab1/tab1.module.ts","./src/app/tab1/tab1.page.ts","./src/app/tab1/tab1.page.scss","./src/app/tab1/tab1.page.html"],"names":[],"mappings":"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","file":"src_app_tab1_tab1_module_ts.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CalendarApiService {\n\n  private apiKey:string = \"ba2e4dfa3ba60adc04e45b9b0d4225ec9e2b2373\";\n  private baseUrl: string = \"https://calendarific.com/api/v2\";\n\n  constructor(private http: HttpClient) { }\n\n  //get all holidays\n  //pass in required parameters(api_key, country & year) with the base url\n  getAllHolidays(){\n    return this.http.get(this.baseUrl + '/holidays?api_key=' + this.apiKey + '&country=SG&year=2021');\n  }\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab1Page } from './tab1.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\nimport { NgCalendarModule  } from 'ionic2-calendar';\nimport { LocalNotifications } from '@ionic-native/local-notifications/ngx';\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    Tab1PageRoutingModule,\n    NgCalendarModule\n  ],\n  declarations: [Tab1Page],\n  providers: [LocalNotifications]\n})\nexport class Tab1PageModule {}\n","import { Component, ViewChild } from '@angular/core';\nimport { ModalController, NavController } from '@ionic/angular';\nimport { EventModalPage } from '../event-modal/event-modal.page';\nimport { LocalNotifications } from '@ionic-native/local-notifications/ngx';\nimport { AuthService } from '../auth.service';\nimport { CalendarApiService } from '../calendar-api.service';\nimport { Subject } from 'rxjs';\nimport { EventService } from '../event.service';\nimport { CalendarComponent } from 'ionic2-calendar';\n\n@Component({\n  selector: 'app-tab1',\n  templateUrl: 'tab1.page.html',\n  styleUrls: ['tab1.page.scss']\n})\nexport class Tab1Page {\n\n  @ViewChild(CalendarComponent) myCalendar: CalendarComponent;\n\n  refresh: Subject<any> = new Subject();\n  viewTitle: string;\n  eventSource = [];\n  selectedDate = new Date();\n  calendar = {\n    mode: 'month',\n    currentDate: new Date()\n  };\n  myEvents: any =[];\n  publicHolidays: any = [];\n\n  constructor(public navCtrl: NavController, private modalController: ModalController,\n    private localNotification: LocalNotifications, private api: CalendarApiService,\n    private eventService: EventService, private auth: AuthService) {\n\n      //get all users events from firebase and display in local calendar\n      this.eventService.getEvents().subscribe(data => {\n        this.eventSource = [];\n        this.myEvents = data;\n        this.myEvents.forEach(ele => {\n          let event:any = {};\n          event.id = ele.id;\n          event.title = ele.title;\n          event.startTime = (ele.startTime).toDate();\n          event.endTime = (ele.endTime).toDate();\n          event.allDay = ele.allDay;\n          this.eventSource.push(event);\n        });\n          //get all public holidays from api and display in local calendar\n          this.api.getAllHolidays().subscribe((data)=> {\n          this.publicHolidays = data;\n          this.publicHolidays = this.publicHolidays.response.holidays;\n          this.publicHolidays.forEach(ele => {\n            let holiday: any = {};\n            holiday.title = ele.name;\n            holiday.startTime = new Date(ele.date.iso);\n            holiday.endTime = new Date(ele.date.iso);\n            this.eventSource.push(holiday);\n          });\n          //refresh calendar to make sure it is updated\n          this.myCalendar.loadEvents();\n        })\n        })\n  }\n\n  ngOnInit(){}\n\n  //add new event\n  async addEvent() {\n    //create modal and pass in selected date\n    let modal = this.modalController.create(\n      {\n        component: EventModalPage,\n        componentProps:{\n          selectedDate: this.selectedDate\n        }\n      });\n    (await modal).present();\n    (await modal).onDidDismiss().then((data: any) => {\n      //if data exist\n      if (data) {\n        //create event var\n        let event = {\n          title: data.data.title,\n          startTime: new Date(data.data.startTime),\n          endTime: new Date(data.data.endTime),\n          allDay: data.data.allDay,\n        };\n        //add new event in database\n        this.eventService.addEvent(event);\n        //set notification based on event startTime\n        this.set_notification(event.title, event.startTime);\n      }\n\n    });\n  }\n\n  //change month in title\n  onViewTitleChanged(title) {\n    this.viewTitle = title;\n  }\n\n  //edit or delete selected event\n  async onEventSelected(event) {\n    //disable editing or deleting of public holidays\n    //NOTE: public holidays do not have id field\n    if(event.id!=null){\n    let modal = this.modalController.create(\n      {\n        component: EventModalPage,\n        componentProps:{\n          id: event.id,\n          title: event.title,\n          startTime: event.startTime,\n          endTime: event.endTime,\n          allDay: event.allDay,\n        }\n      });\n    (await modal).present();\n    (await modal).onDidDismiss().then((data: any) => {\n      //update event only when data is available after editing and not after event is deleted \n      if (data.data) {\n        let event = {\n          title: data.data.title,\n          startTime: new Date(data.data.startTime),\n          endTime: new Date(data.data.endTime),\n          allDay: data.data.allDay,\n        };\n        this.eventService.updateEvent(data.data.id, event);\n        this.set_notification(event.title, event.startTime);\n      }\n    });\n  }\n  }\n\n  onTimeSelected(ev) {\n    this.selectedDate = ev.selectedTime;\n  }\n\n  set_notification(title, date){\n    console.log(new Date(date.getTime()));\n    this.localNotification.schedule({\n      text: title,\n      trigger: {at: new Date(date.getTime())},\n      led: 'FF0000',\n      sound: null\n    });\n  }\n\n}\n","export default \"ion-fab {\\n  margin: 15px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRhYjEucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksWUFBQTtBQUNKIiwiZmlsZSI6InRhYjEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWZhYiB7XHJcbiAgICBtYXJnaW46IDE1cHg7XHJcbn0iXX0= */\";","export default \"<ion-header [translucent]=\\\"true\\\">\\n    <ion-toolbar>\\n        <ion-title>\\n            {{viewTitle}}\\n        </ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n    <calendar [eventSource]=\\\"eventSource\\\" [calendarMode]=\\\"calendar.mode\\\" [currentDate]=\\\"calendar.currentDate\\\" (onEventSelected)=\\\"onEventSelected($event)\\\" (onTitleChanged)=\\\"onViewTitleChanged($event)\\\" (onTimeSelected)=\\\"onTimeSelected($event)\\\" step=\\\"30\\\">\\n    </calendar>\\n\\n    <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n        <ion-fab-button [disabled]=\\\"!auth.isLoggedIn()\\\" (click)=\\\"addEvent()\\\">\\n            <ion-icon name=\\\"add\\\"></ion-icon>\\n        </ion-fab-button>\\n    </ion-fab>\\n</ion-content>\";"],"sourceRoot":"webpack:///"}